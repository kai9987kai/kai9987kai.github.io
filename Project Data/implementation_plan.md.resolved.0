# Implementation Plan - Simulation Enhancement: Dream Mode & Visuals

## Goal Description
Enhance the **Project 1X4G Simulation** to deepen the biological realism and visual immersion. We will introduce a **"Dream Mode"** (sleep cycle) where the system must rest to consolidate memories and reduce fatigue, and a **"Viral Injection"** mechanic to visualize genetic rewriting. We will also upgrade the UI to a **Cyber-Organic** aesthetic with glowing effects and pulse animations.

## User Review Required
> [!NOTE]
> This update introduces a "Fatigue" mechanic. If the system runs too long without sleep, performance (learning rate and stability) will degrade, forcing the user to engage with the biological constraints of the system.

## Proposed Changes

### [Simulation Logic]
#### [MODIFY] [project_1x4g_simulation.html](file:///C:/Users/kai99/.gemini/antigravity/brain/b02c5aba-23ad-4174-8b3d-70f1bc124898/project_1x4g_simulation.html)
- **Add State Variables:** `fatigue` (0-100), `isSleeping` (boolean).
- **Update [step()](file:///C:/Users/kai99/.gemini/antigravity/brain/b02c5aba-23ad-4174-8b3d-70f1bc124898/project_1x4g_simulation.html#720-776):**
    - Increase `fatigue` over time.
    - If `fatigue` is high, add noise to neuron thresholds (performance degradation).
    - If `isSleeping`, stop external inputs, replay `rewardHistory` (simplified replay), and decrease `fatigue`.
- **Add `toggleSleep()` function:** Handles transition in/out of sleep mode.
- **Add `injectVirus()` function:** Visualizes a "rewrite" of the GRN with a chaotic animation before settling on new values.

### [Visuals & UI]
#### [MODIFY] [project_1x4g_simulation.html](file:///C:/Users/kai99/.gemini/antigravity/brain/b02c5aba-23ad-4174-8b3d-70f1bc124898/project_1x4g_simulation.html)
- **CSS Overhaul:**
    - Darker background (`#0a0a12`).
    - Neon accents (Cyan for Quantum, Pink/Red for Bio).
    - "Pulse" animation for the biological section.
    - CRT scanline overlay effect for the "Monitor" look.
- **Canvas Rendering:**
    - **Neurons:** Draw connections with glowing lines.
    - **Dream Mode:** When sleeping, overlay a "Dreaming..." visualization (e.g., random rapid firing or wave patterns).

## Verification Plan
### Manual Verification
- **Fatigue Test:** Run simulation and watch "Fatigue" meter rise. Verify performance drops (error rate increases) at high fatigue.
- **Sleep Test:** Click "Enter Sleep Mode". Verify inputs stop, fatigue drops, and "Dreaming" visuals appear.
- **Visual Check:** Ensure the new "Cyber-Organic" theme looks premium and animations are smooth.
