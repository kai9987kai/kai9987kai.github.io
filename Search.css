<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Scoped Search UI</title>
  <style>
    /* 
      Scoped, collision-resistant CSS:
      - Everything is namespaced under #k9987k-search-root
      - No global element selectors (except within the root via :where())
      - Unique class/id prefix: k9987k-
    */

    #k9987k-search-root{
      /* ---------- Design tokens (scoped) ---------- */
      --k9987k-accent: #00b5ad;
      --k9987k-accent-2: #00a09d;

      --k9987k-bg: #0b0f14;
      --k9987k-surface: rgba(255,255,255,.08);
      --k9987k-surface-2: rgba(255,255,255,.12);
      --k9987k-border: rgba(255,255,255,.16);

      --k9987k-text: rgba(255,255,255,.92);
      --k9987k-muted: rgba(255,255,255,.66);

      --k9987k-shadow: 0 18px 55px rgba(0,0,0,.35);
      --k9987k-shadow-soft: 0 10px 30px rgba(0,0,0,.22);

      --k9987k-radius: 14px;
      --k9987k-radius-sm: 10px;

      --k9987k-ring: 0 0 0 3px rgba(0,181,173,.35);
      --k9987k-ring-strong: 0 0 0 4px rgba(0,181,173,.45);

      --k9987k-h: 48px;
      --k9987k-gap: 12px;

      --k9987k-font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";

      font-family: var(--k9987k-font);
      color: var(--k9987k-text);
    }

    @media (prefers-color-scheme: light){
      #k9987k-search-root{
        --k9987k-bg: #f6f8fb;
        --k9987k-surface: rgba(10,18,28,.05);
        --k9987k-surface-2: rgba(10,18,28,.08);
        --k9987k-border: rgba(10,18,28,.12);
        --k9987k-text: rgba(10,18,28,.92);
        --k9987k-muted: rgba(10,18,28,.62);
        --k9987k-shadow: 0 18px 55px rgba(10,18,28,.10);
        --k9987k-shadow-soft: 0 10px 30px rgba(10,18,28,.08);
      }
    }

    /* Optional background for just this component */
    #k9987k-search-root.k9987k-search--with-bg{
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(0,181,173,.22), transparent 55%),
        radial-gradient(900px 600px at 85% 30%, rgba(120,120,255,.16), transparent 55%),
        linear-gradient(180deg, var(--k9987k-bg), var(--k9987k-bg));
      padding: 18px;
      border-radius: calc(var(--k9987k-radius) + 4px);
    }

    /* Ensure box sizing is contained to the root without affecting the page */
    #k9987k-search-root :where(*, *::before, *::after){
      box-sizing: border-box;
    }

    /* ---------- Layout wrapper ---------- */
    #k9987k-search-root .k9987k-search-wrap{
      width: min(760px, 96vw);
      margin: 0 auto;
    }

    /* ---------- Search form ---------- */
    #k9987k-search-root form.k9987k-search-form{
      display: flex;
      align-items: stretch;
      justify-content: center;
      gap: 0;
      width: min(560px, 100%);
      margin: 0 auto 18px;
      border-radius: calc(var(--k9987k-radius) + 2px);
      background: linear-gradient(180deg, var(--k9987k-surface-2), var(--k9987k-surface));
      border: 1px solid var(--k9987k-border);
      box-shadow: var(--k9987k-shadow-soft);
      overflow: hidden;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    #k9987k-search-root input.k9987k-search-input{
      flex: 1;
      min-width: 0;
      height: var(--k9987k-h);
      padding: 0 14px;
      font-size: 16px;
      letter-spacing: .2px;
      color: var(--k9987k-text);
      background: transparent;
      border: none;
      outline: none;
      appearance: none;
    }

    #k9987k-search-root input.k9987k-search-input::placeholder{
      color: var(--k9987k-muted);
    }

    #k9987k-search-root input.k9987k-search-input:focus-visible{
      box-shadow: var(--k9987k-ring);
    }

    #k9987k-search-root button.k9987k-search-btn{
      height: var(--k9987k-h);
      width: 56px;
      border: none;
      outline: none;
      cursor: pointer;
      display: grid;
      place-items: center;
      color: #fff;
      background: linear-gradient(180deg, var(--k9987k-accent), var(--k9987k-accent-2));
      transition: transform .12s ease, filter .18s ease, box-shadow .18s ease;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.14);
    }

    #k9987k-search-root button.k9987k-search-btn:hover{
      filter: brightness(1.03);
    }

    #k9987k-search-root button.k9987k-search-btn:active{
      transform: translateY(1px) scale(.99);
      filter: brightness(.98);
    }

    #k9987k-search-root button.k9987k-search-btn:focus-visible{
      box-shadow: var(--k9987k-ring-strong), inset 0 0 0 1px rgba(255,255,255,.14);
      animation: k9987k-pulse 1.1s ease-in-out infinite;
    }

    @keyframes k9987k-pulse{
      0%   { transform: translateY(0) scale(1); }
      50%  { transform: translateY(0) scale(1.03); }
      100% { transform: translateY(0) scale(1); }
    }

    #k9987k-search-root .k9987k-btn-ic{
      width: 20px;
      height: 20px;
      display: block;
      fill: currentColor;
      opacity: .95;
    }

    /* ---------- Results ---------- */
    #k9987k-search-root ul.k9987k-results{
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: var(--k9987k-gap);
      width: min(720px, 100%);
      margin-inline: auto;
    }

    #k9987k-search-root li.k9987k-result-item{
      margin: 0;
      padding: 0;
    }

    #k9987k-search-root a.k9987k-result-link{
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: center;
      padding: 14px 14px;
      text-decoration: none;
      color: var(--k9987k-text);
      border-radius: var(--k9987k-radius);
      background: linear-gradient(180deg, var(--k9987k-surface-2), var(--k9987k-surface));
      border: 1px solid var(--k9987k-border);
      box-shadow: 0 0 0 rgba(0,0,0,0);
      transform: translateY(0);
      transition: transform .14s ease, box-shadow .18s ease, border-color .18s ease;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    #k9987k-search-root a.k9987k-result-link:hover{
      transform: translateY(-2px);
      box-shadow: var(--k9987k-shadow);
      border-color: rgba(0,181,173,.35);
    }

    #k9987k-search-root a.k9987k-result-link:active{
      transform: translateY(-1px);
    }

    #k9987k-search-root a.k9987k-result-link:focus-visible{
      outline: none;
      box-shadow: var(--k9987k-ring-strong), var(--k9987k-shadow-soft);
      border-color: rgba(0,181,173,.5);
    }

    #k9987k-search-root .k9987k-result-title{
      font-size: 16px;
      font-weight: 650;
      letter-spacing: .15px;
      line-height: 1.2;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    #k9987k-search-root .k9987k-result-meta{
      font-size: 13px;
      color: var(--k9987k-muted);
      font-style: italic;
      white-space: nowrap;
      justify-self: end;
    }

    #k9987k-search-root mark.k9987k-mark{
      background: rgba(0,181,173,.22);
      color: inherit;
      padding: 0 .15em;
      border-radius: .35em;
    }

    #k9987k-search-root .k9987k-no-results{
      margin-top: 14px;
      color: var(--k9987k-muted);
      text-align: center;
      font-size: 14px;
      display: none;
    }

    @media (max-width: 520px){
      #k9987k-search-root a.k9987k-result-link{
        grid-template-columns: 1fr;
      }
      #k9987k-search-root .k9987k-result-meta{
        justify-self: start;
      }
      #k9987k-search-root button.k9987k-search-btn{
        width: 52px;
      }
    }
  </style>
</head>

<body>
  <!-- Put this root wherever you want the component; CSS won't leak out -->
  <section id="k9987k-search-root" class="k9987k-search--with-bg">
    <div class="k9987k-search-wrap">
      <form class="k9987k-search-form" autocomplete="off" role="search" aria-label="Site search">
        <input class="k9987k-search-input" type="search" inputmode="search" placeholder="Search…" aria-label="Search" />
        <button class="k9987k-search-btn" type="submit" aria-label="Search">
          <svg class="k9987k-btn-ic" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M10 2a8 8 0 105.293 14.293l3.707 3.707a1 1 0 001.414-1.414l-3.707-3.707A8 8 0 0010 2zm0 2a6 6 0 110 12 6 6 0 010-12z"/>
          </svg>
        </button>
      </form>

      <ul class="k9987k-results" aria-label="Search results">
        <!-- Example results -->
        <li class="k9987k-result-item">
          <a class="k9987k-result-link" href="#">
            <div class="k9987k-result-title">Bournemouth University — Game Audio Techniques</div>
            <span class="k9987k-result-meta">Unit / Level 5</span>
          </a>
        </li>
        <li class="k9987k-result-item">
          <a class="k9987k-result-link" href="#">
            <div class="k9987k-result-title">Maya 2025 — Polygon Reduction Tool</div>
            <span class="k9987k-result-meta">Pipeline</span>
          </a>
        </li>
        <li class="k9987k-result-item">
          <a class="k9987k-result-link" href="#">
            <div class="k9987k-result-title">Three.js — Agent Simulation Environment</div>
            <span class="k9987k-result-meta">WebGL</span>
          </a>
        </li>
        <li class="k9987k-result-item">
          <a class="k9987k-result-link" href="#">
            <div class="k9987k-result-title">Ender 3 — Advanced G-code Start/End Scripts</div>
            <span class="k9987k-result-meta">3D Print</span>
          </a>
        </li>
        <li class="k9987k-result-item">
          <a class="k9987k-result-link" href="#">
            <div class="k9987k-result-title">Typography Playground — Presets & Export</div>
            <span class="k9987k-result-meta">UI Tool</span>
          </a>
        </li>
      </ul>

      <div class="k9987k-no-results" aria-live="polite">No results match your search.</div>
    </div>
  </section>

  <script>
    (function(){
      // Scope JS queries to the component root so it cannot interfere with other search UIs
      const root = document.getElementById('k9987k-search-root');
      if(!root) return;

      const form = root.querySelector('form.k9987k-search-form');
      const input = root.querySelector('input.k9987k-search-input');
      const list = root.querySelector('ul.k9987k-results');
      const noResults = root.querySelector('.k9987k-no-results');

      if(!form || !input || !list || !noResults) return;

      // Cache original texts for reliable highlight reset
      const items = Array.from(list.querySelectorAll('li.k9987k-result-item')).map(li => {
        const a = li.querySelector('a.k9987k-result-link');
        const titleEl = a ? a.querySelector('.k9987k-result-title') : null;
        const metaEl  = a ? a.querySelector('.k9987k-result-meta')  : null;
        return {
          li,
          a,
          titleEl,
          metaEl,
          titleText: titleEl ? titleEl.textContent : (a ? a.textContent : ''),
          metaText: metaEl ? metaEl.textContent : ''
        };
      });

      function escapeRegExp(s){
        return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
      }

      function setHighlightedText(el, text, query){
        if(!el) return;
        if(!query){
          el.textContent = text;
          return;
        }
        const re = new RegExp(escapeRegExp(query), 'ig');
        // Use a dedicated mark class to avoid styling collisions
        el.innerHTML = text.replace(re, m => `<mark class="k9987k-mark">${m}</mark>`);
      }

      function filter(){
        const q = input.value.trim();
        const qLower = q.toLowerCase();
        let shown = 0;

        for(const it of items){
          const hay = (it.titleText + ' ' + it.metaText).toLowerCase();
          const ok = q ? hay.includes(qLower) : true;

          it.li.style.display = ok ? '' : 'none';
          if(ok){
            shown++;
            setHighlightedText(it.titleEl, it.titleText, q);
            setHighlightedText(it.metaEl, it.metaText, q);
          }else{
            setHighlightedText(it.titleEl, it.titleText, '');
            setHighlightedText(it.metaEl, it.metaText, '');
          }
        }

        noResults.style.display = (shown === 0) ? 'block' : 'none';
      }

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        filter();
      });

      input.addEventListener('input', filter);

      input.addEventListener('keydown', (e) => {
        if(e.key === 'Escape'){
          input.value = '';
          filter();
          input.blur();
        }
      });

      // Initial render
      filter();
    })();
  </script>
</body>
</html>
